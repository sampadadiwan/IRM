<% 
    type ||= "fund" 
    title = "Generate Fund Ratios" 
    title += " for #{@fund.name}" if type == "fund"
%>
<%= render FormCard.new(title:) do %>

    <%= form_with(model: @fund, url: generate_fund_ratios_fund_path(@fund), method: :post) do |form| %>
    
    <%= form.text_field :id, class: "form-control", hidden: true  %>
    
    <div class="form-group">
        <%= form.label :end_date %>
        <%= form.date_field :end_date, class: "form-control", name: "end_date", value: end_date %>
    </div>

    <% if type == "fund" %>
    <div class="form-group">
        <%= form.label :generate_for_commitments, "Generate For Each Folio" %>
        <%= form.check_box :generate_for_commitments, class: "form-check-input", name: "generate_for_commitments", value: true %>
        <small class="text-muted">Check if you want the ratios to be generated for each folio / commitment</small>
    </div>
    <% elsif type == "cross-fund" %>
    <div class="form-group">
        <%= form.label :fund_ids, "Select the funds" %>
        <%= form.select :fund_ids, policy_scope(Fund).map{|f| [f.name, f.id]}, {}, class: "form-control select2", name: "fund_ids", multiple: true %>
        <small class="text-muted">Select the funds across which you want to generate ratios</small>
    </div>
    <% elsif type == "cross-portfolio" %>
    <div class="form-group">
        <%= form.label :portfolio_company_ids, "Select the portfolio companies" %>
        <%= form.select :portfolio_company_ids, policy_scope(Investor).portfolio_companies.map{|f| [f.investor_name, f.id]}, {}, class: "form-control select2", name: "portfolio_company_ids", multiple: true %>
        <small class="text-muted">Select the portfolio companies across which you want to generate ratios</small>
    </div>
    <% end %>

    <div class="form-group">
        <%= form.submit "Generate", {class: "btn btn-outline-primary"}%>
    </div>
    <% end %>

<% end %>
