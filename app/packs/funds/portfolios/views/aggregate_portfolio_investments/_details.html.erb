<div class="associated_entity" data-controller="tabs tabdetails">

  <nav class="nav nav-pills nav-justified p-3 mb-3 rounded align-items-center card flex-row"  role="tablist">
    <a class="nav-link active" data-bs-toggle="pill" data-bs-toggle="tab" href="#portfolio-investments-tab"
          data-action="click->tabdetails#loadData">Investments</a>
    <a class="nav-link" data-bs-toggle="pill" data-bs-toggle="tab" href="#cashflows-tab"
          data-action="click->tabdetails#loadData">Income</a>
  </nav>

  <div class="tab-content">
    <div id="portfolio-investments-tab" class="tab-pane fade in show active">
      <div id="portfolio_investments" class="associated_entity">
        <% 
            params[:fund_id] = @aggregate_portfolio_investment.fund_id 
            params[:portfolio_company_id] = @aggregate_portfolio_investment.portfolio_company_id
        %>
        <%= render "/portfolio_investments/index", 
          portfolio_investments: @aggregate_portfolio_investment.portfolio_investments.includes(:aggregate_portfolio_investment, :fund), aggregate_portfolio_investment: @aggregate_portfolio_investment %>
      </div>
    </div>
    <div id="cashflows-tab" class="tab-pane fade in">
      <div id="cashflows" class="associated_entity">
        <%= render "/portfolio_cashflows/index", portfolio_cashflows: @aggregate_portfolio_investment.portfolio_cashflows, aggregate_portfolio_investment: @aggregate_portfolio_investment %>
      </div>
    </div>
  </div>

</div>
