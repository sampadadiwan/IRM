<%= render FormCard.new(title: "Investment Instrument : #{@investment_instrument.name}") do %>
<table class="table table-bordered dataTable">
  <tr>
    <td>
      Name
    </td>
    <td>
      <%= @investment_instrument.name %>
    </td>
  </tr>

  <tr>
    <td>
      Currency
    </td>
    <td>
      <%= @investment_instrument.currency %>
    </td>
  </tr>

  <tr>
    <td>
      Entity
    </td>
    <td>
      <%= @investment_instrument.entity.name %>
    </td>
  </tr>
  <tr>
    <td>
      Portfolio Company
    </td>
    <td>
      <%= link_to @investment_instrument.portfolio_company %>
    </td>
  </tr>

  <%= display_custom_fields(@investment_instrument) %>

</table>
<div class="associated_entity">
  <% if policy(@investment_instrument).edit? %>
    <%= link_to "Edit", edit_investment_instrument_path(@investment_instrument), {class: "btn btn-outline-primary"} %>
    <%= button_to "Delete", @investment_instrument, method: :delete, class: "btn btn-outline-danger", form_class: "deleteButton", data: {action: "click->confirm#popup", turbo:false, msg: "This will permanently delete this item and also all associated portfolio transactions across funds. Proceed?"}  %>
  <% end %>
</div>

<% end %>

<div class="associated_entity">
  <%= render "/portfolio_cashflows/index", portfolio_cashflows: @investment_instrument.portfolio_cashflows %>
</div>

<div class="associated_entity">
  <%= render "/portfolio_investments/index", portfolio_investments: @investment_instrument.portfolio_investments %>
</div>


<div class="associated_entity">
  <%= render "/valuations/index", valuations: @investment_instrument.valuations %>
</div>
