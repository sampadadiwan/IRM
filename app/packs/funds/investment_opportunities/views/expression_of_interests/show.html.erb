<%= render "/layouts/alerts" %>

  <table class="table table-bordered dataTable">

    <tr>
      <td>
        Investment Fund
      </td>
      <td>
        <%= @expression_of_interest.entity.name %>
      </td>
    </tr>
    <tr>
      <td>
        User
      </td>
      <td>
        <%= @expression_of_interest.user.full_name %>
      </td>
    </tr>
    <tr>
      <td>
        Investor
      </td>
      <td>
        <%= @expression_of_interest.investor.investor_name %>
      </td>
    </tr>
    <tr>
      <td>
        Signatory
      </td>
      <td>
        <%= @expression_of_interest.investor_signatory.full_name if @expression_of_interest.investor_signatory %>
      </td>
    </tr>
    <tr>
      <td>
        Investment Opportunity
      </td>
      <td>
        <%= link_to @expression_of_interest.investment_opportunity.company_name,
          @expression_of_interest.investment_opportunity %>
      </td>
    </tr>
    <tr>
      <td>
        Amount
      </td>
      <td>
        <%= money_to_currency @expression_of_interest.amount, params %>
      </td>
    </tr>
    <tr>
      <td>
        Approved
      </td>
      <td>
        <%= display_boolean @expression_of_interest.approved %>
      </td>
    </tr>
    <tr>
      <td>
        Verified
      </td>
      <td>
        <%= display_boolean @expression_of_interest.verified %>
      </td>
    </tr>
    <tr>
      <td>
        Allocation Percentage
      </td>
      <td>
        <%= @expression_of_interest.allocation_percentage %> %
      </td>
    </tr>
    <tr>
      <td>
        Allocation Amount
      </td>
      <td>
        <%= money_to_currency @expression_of_interest.allocation_amount, params %>
      </td>
    </tr>

    <tr>
      <td>
        Details
      </td>
      <td>
        <%= @expression_of_interest.details %>
      </td>
    </tr>



  </table>


  <div>
    <% if policy(@expression_of_interest).update? %>
      <%= link_to "Edit" , edit_expression_of_interest_path(@expression_of_interest), {class: "btn btn-outline-primary" } %> 
      <%= button_to "Delete" , @expression_of_interest, method: :delete, class: "btn btn-outline-danger" ,
          form_class: "deleteButton" , data: {action: "click->confirm#popup" , turbo:false} %>
    <% end %>

    <%= button_to "Generate Documentation", 
        generate_documentation_expression_of_interest_path(@expression_of_interest), 
        method: :patch, class: "btn btn-outline-success" , 
        form_class: "deleteButton",data: {action: "click->confirm#popup", method: :patch,
        msg: "Generate documentation for this EOI from kyc and opportunity info. This will delete any previously generated documentation for this EOI. Proceed?"} if policy(@expression_of_interest).generate_documentation? %>

  <%= button_to "Generate Esign Link", 
        generate_esign_link_expression_of_interest_path(@expression_of_interest), 
        method: :patch, class: "btn btn-outline-success" , 
        form_class: "deleteButton",data: {action: "click->confirm#popup", method: :patch,
        msg: "Generate esign link for this EOI. This will trigger the eSign process. Proceed?"} if policy(@expression_of_interest).generate_esign_link? %>
  </div>

  <%= render "expression_of_interests/details", expression_of_interest: @expression_of_interest %>