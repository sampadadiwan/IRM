<div class="associated_entity" data-controller="tabs tabdetails">

  
    <nav class="nav nav-tabs nav-fill nav-justified"  role="tablist">
      <a class="nav-link active" data-bs-toggle="pill" data-toggle="tab" href="#docs-tab"
          data-action="click->tabdetails#loadData">Documents</a>

      <% if policy(investment_opportunity).update? %>
          
          <a class="nav-link" data-bs-toggle="pill" data-toggle="tab" href="#reminders-tab" 
            data-action="click->tabdetails#loadData">
            Reminders
          </a>
      <% end %>

      <a class="nav-link" data-bs-toggle="pill" data-toggle="tab" href="#eoi-tab" 
          data-action="click->tabdetails#loadData">Interests</a>

      <a class="nav-link" data-bs-toggle="pill" data-toggle="tab" href="#access-rights-tab" 
          data-action="click->tabdetails#loadData">Access Rights</a>
    </nav>
  
    <div class="tab-content" data-controller="datatable">
  
        <div id="docs-tab" class="tab-pane fade in show active">
          <div id="docs" class="associated_entity">
            <%= render "/documents/index", documents: investment_opportunity.documents, 
                owner: investment_opportunity, entity: investment_opportunity.entity %>
          </div>     
        </div>
        
        <div id="access-rights-tab" class="tab-pane fade">

          <div id="access_rights" class="associated_entity" data-controller="datatable">
            <% form_type = current_user.entity_id != investment_opportunity.entity_id ? "investor_form" : nil %>
            <%= link_to access_rights_path(owner_id: investment_opportunity.id, owner_type: "InvestmentOpportunity", 
                                            entity_id: current_user.entity_id, form_type:), 
                        class: "load_data_link", data: { turbo_frame: 'access_rights_frame' } do %>
              <span>Loading...</span>
            <% end %>
        
            <%= turbo_frame_tag "access_rights_frame", target: "_top" do %>
            <% end %>
          </div>
    
        </div>
  

        <div id="eoi-tab" class="tab-pane fade">
          <div id="eois" class="associated_entity">
            
            <%= link_to expression_of_interests_path( investment_opportunity_id: investment_opportunity.id, 
                                    all: true), 
                                    class: "load_data_link", 
                                    data: { turbo_frame: 'expression_of_interests_list' } do %>
              <span>Loading...</span>
            <% end %>
            <%= turbo_frame_tag "expression_of_interests_list", target: "_top" do %>
            <% end %>

          </div>     
        </div>

        <div id="reminders-tab" class="tab-pane fade">
          <div id="reminders" class="associated_entity">
            <%= link_to reminders_path( owner_id: investment_opportunity.id, 
                                    owner_type: "InvestmentOpportunity", sent: false), 
                                    class: "load_data_link", 
                                    data: { turbo_frame: 'reminders_list' } do %>
              <span>Loading...</span>
            <% end %>
            <%= turbo_frame_tag "reminders_list", target: "_top" do %>
            <% end %>
          </div>     
        </div>
  
    </div>
  
</div>
  