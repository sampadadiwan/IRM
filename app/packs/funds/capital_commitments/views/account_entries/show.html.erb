<%= render "/layouts/alerts" %>
<table class="table table-bordered dataTable">
  <tr>
    <td>
      Fund
    </td>
    <td>
      <%= link_to @account_entry.fund.name, @account_entry.fund %>
    </td>
  </tr>
  <tr>
    <td>
      Investor
    </td>
    <td>
      <%= link_to @account_entry.investor if @account_entry.investor %>
    </td>
  </tr>

  <% if @account_entry.capital_commitment %>
    <tr>
      <td>
        Capital Commitment
      </td>
      <td>
        <%= link_to @account_entry.capital_commitment %>
      </td>
    </tr>
    
    <tr>
      <td>
        Folio
      </td>
      <td>
        <%= @account_entry.folio_id %>
      </td>
    </tr>
  <% end %>
  <tr>
    <td>
      Reporting Date
    </td>
    <td>
      <%= l @account_entry.reporting_date %>
    </td>
  </tr>
  <tr>
    <td>
      Period
    </td>
    <td>
      <%= @account_entry.period %>
    </td>
  </tr>
  <tr>
    <td>
      Entry Type
    </td>
    <td>
      <%= @account_entry.entry_type %>
      <% if @account_entry.cumulative %>
        <span class="badge bg-success">Cumulative<span>
      <% end %>
    </td>
  </tr>
  <tr>
    <td>
      Name
    </td>
    <td>
      <%= @account_entry.name %>
    </td>
  </tr>

  <tr>
    <td>
      Type
    </td>
    <td>
      <%= @account_entry.commitment_type %>
    </td>
  </tr>

  <% if @account_entry.parent %>
  <tr>
    <td>
      Parent
    </td>
    <td>
      <%= link_to @account_entry.parent %>
    </td>
  </tr>
  <% end %>

  <% if @account_entry.fund_formula %>
  <tr>
    <td>
      Formula
    </td>
    <td>
      <%= link_to @account_entry.fund_formula %>
      
      <%= @account_entry.rule_for %>
    </td>
  </tr>
  <% end %>

  <tr>
    <td>
      Amount
    </td>
    <td>
      <% if @account_entry.name.include?("Percentage") %>
        <%= @account_entry.amount_cents %> %
      <% else %>
        <%= money_to_currency @account_entry.amount, params %>
      <% end %>
    </td>
  </tr>

  <%= display_custom_fields(@account_entry, collapsed: false) if current_user %>

  <tr>
    <td>
      Notes
    </td>
    <td>
      <%= @account_entry.notes %>
    </td>
  </tr>

  <% if @account_entry.exchange_rate %>
  <tr>
    <td>
      Exchange Rate
    </td>
    <td>
      <%= link_to @account_entry.exchange_rate %>
    </td>
  </tr>
  <% end %>

  <% if @account_entry.explanation.present? %>
  <tr>
    <td>
      Explanation
    </td>
    <td>
      <% @account_entry.explanation.each do |exp| %>
        <div><%= exp %></div>
      <% end %>
    </td>
  </tr>
  <% end %>

</table>
<div>
  <% if policy(@account_entry).update? %>
    <%= link_to "Edit", edit_account_entry_path(@account_entry), {class: "btn btn-outline-primary"} %> 
    <%= button_to "Delete", @account_entry, method: :delete, class: "btn btn-outline-danger", form_class: "deleteButton", data: {action: "click->confirm#popup", turbo:false}  %>
  <% end %>
</div>
