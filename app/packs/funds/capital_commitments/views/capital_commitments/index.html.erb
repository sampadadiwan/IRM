<%= render "/layouts/alerts" %>
<%= render "/layouts/filter", associations: [:investor_kyc, :investor], hidden_fields: {card: params[:card]} %>

<%= render ReportingComponent.new do %>

    <!-- If we provide the path /capital_commitments?my_commitments=true, 
        then we see if we can simply show the commitment -->
    <% if params[:my_commitments].present? && @capital_commitments.length == 1 %>
        <% controller.redirect_to @capital_commitments.first %>
    <% elsif params[:ag].present? %>
        <%= render "/capital_commitments/index_ag", capital_commitments: @capital_commitments, fund: nil, lazy_load_data: false %>
    <!-- Otherwise, we show the list of commitments -->
    <% else %>
        <%= render "/capital_commitments/index", capital_commitments: @capital_commitments, fund: nil, lazy_load_data: false %>
    <% end %>

<% end %>