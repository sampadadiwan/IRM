<% 
    label ||= "Stakeholder Users" 
    investor ||= nil
%>

<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800"><%= label.pluralize %></h1>

    <div class="d-flex flex-wrap align-items-center gap-2">

        <% if investor %>
            <%= link_to new_investor_access_path(
                        "investor_access[investor_id]": investor.id,
                        "investor_access[entity_id]": current_user.entity_id),
                        class: "btn btn-outline-primary d-inline-flex align-items-center",
                        data: { turbo_frame: 'new_investor_access' } do %>
            <i class="ti ti-user-plus"></i> New <%= label %>
            <% end %>
        <% else %>
            <%= link_to investor_accesses_path(all: true, format: :xlsx),
                        class: "btn btn-outline-primary d-inline-flex align-items-center",
                        id: "download_stakeholder_users",
                        data: { turbo: false } do %>
            <i class="ti ti-download"></i> <%= t_common(:download) %> <%= label %>
            <% end %>
        <% end %>

        <%= link_to "Filter", investor_accesses_path(filter: true), class: "btn btn-outline-primary ti ti-filter" %>

        <%= link_to new_import_upload_path(
                        "import_upload[import_type]": "InvestorAccess",
                        "sample_upload": "INVESTOR_ACCESS_SAMPLE"),
                    class: "btn btn-outline-success d-inline-flex align-items-center",
                    id: "upload_stakeholder_users",
                    data: { turbo: false } do %>
            <i class="ti ti-upload"></i> <%= t_common(:upload) %> <%= label %>
        <% end %>

    </div>

</div>
  



<div class="table-responsive">

    <%= render "/investor_accesses/table", investor_accesses: investor_accesses %>

</div>