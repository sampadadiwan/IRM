<div id="login_page_x" data-controller="login">

        <%= render "/layouts/display_status" if (notice || alert) && params[:display_status].present? %>

        <%- flash.each do |name, msg| -%>
            <%= content_tag :div, msg, :id => "flash_#{name}", class: "text-center alert alert-info login_flash" if msg.is_a?(String) %>
        <%- end -%>  

        <div class="container" data-turbo='false'>

            <!-- Outer Row -->
                    <div class="card border-0">
                        <div class="card-body p-0">
                            <!-- Nested Row within Card Body -->
                            <div class="row">
                                <div class="col-sm bg-login-image login-right">
                                    <div class="p-5 text-center">
                                        
                                        <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>

                                        <form class="user">
                                            <div class="form-group">
                                                <input type="email" class="form-control form-control-user"
                                                    id="user_email" aria-describedby="emailHelp"
                                                    required="required" 
                                                    name="user[email]", value="<%=params[:email]%>"
                                                    placeholder="Enter Email Address...">
                                            </div>

                                            <div class="form-group">
                                                <input type="password" class="form-control form-control-user"
                                                name="user[password]" required="required" 
                                                id="user_password" placeholder="Password">
                                                <i class="far fa-eye" id="togglePassword" style="float:right; margin-top: -25px; margin-right: 5px; cursor: pointer;"></i>
                                            </div>

                                            <div class="form-group">
                                                    <input type="submit" name="login" class="btn btn-outline-primary btn-outline-user btn-outline-block" 
                                                    value="Log In" data-disable-with="Log In">
                                                    &nbsp;&nbsp;
                                                    <input type="checkbox"  
                                                    id="user_remember_me" name="user[remember_me]">
                                                    <label for="user_remember_me">Remember
                                                        Me</label>
                                            </div>
                                        
                                        </form>

                                        <% end %>                                        

                                        <div class="title-line"><span>OR</span></div>

                                        <%= form_for(resource, as: resource_name, url: "/users/magic_link", html: {id: "new_user_wo_pass"}) do |f| %>
                                        
                                        <input type="hidden" name="current_entity_id" value="<%= @current_entity&.id %>" />
                                        <input type="hidden" name="redirect_to" value="<%= session[:user_return_to] %>" />

                                        <form class="user">
                                            <div class="form-group">
                                                <input type="email" class="form-control form-control-user"
                                                    id="user_email_wo_pass" aria-describedby="emailHelp"
                                                    required="required" 
                                                    name="user[email]", value="<%=params[:email]%>"
                                                    placeholder="Email Address...">
                                            </div>

                                            

                                            <span>
                                                    <input type="submit" name="login_wo_pw" class="btn btn-outline-primary btn-outline-user btn-outline-block" 
                                                    value="Log In Via Email Link" data-disable-with="Log In" >
                                            </span>

                                        </form>

                                        <% end %>

                                        <hr>

                                        <div class="text-center">
                                            <%= render "devise/shared/links" %>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



        </div>

</div>


