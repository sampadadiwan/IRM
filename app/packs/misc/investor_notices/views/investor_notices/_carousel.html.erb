<% cache ["InvestorNotice", current_user, current_user.entity], expires_in: 5.day do %>
<% 
    active = "active" 
    notices = InvestorNotice.notices(current_user)
    # If user has come in via a subdomain, show that notice first
    notices = notices.to_a.sort_by{|n| n.entity_id == @current_entity.id ? 0:1} if @current_entity
%>
        
<div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
        <% notices.each do |investor_notice| %>
            <div class="carousel-item <%= active %>">
                <%= render "/investor_notices/preview" , investor_notice: investor_notice %>
            </div>
            <% active = '' %>
        <% end %>
    </div>


    <% if notices.count > 0 %>
    <a class="carousel-control-prev" data-bs-target="#carouselExampleControls" role="button" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" data-bs-target="#carouselExampleControls" role="button" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
    <% end %>

</div>

<% end %>