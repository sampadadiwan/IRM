<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Deal Grid View</h1>
    <span>
        <% if params[:all].blank? %>
            <%= link_to "All Investors", deal_path(id: @deal.id, grid_view: true, all:true), {class: "btn btn-primary"}  %>
        <% else %>
            <%= link_to "Not Declined", deal_path(id: @deal.id, grid_view: true), {class: "btn btn-primary"}  %>
        <% end %>

        <%= link_to new_deal_doc_path("deal_doc[deal_id]": @deal.id), class: "btn btn-primary" do %>
            <i class="fas fa-file-upload"></i> Upload Document
        <% end %>

        <%= link_to deal_path(id: @deal.id, grid_view: true, all:true, format: :xlsx), {class: "btn btn-success"} do %>
            <i class="fa-lg fa-regular fa-file-excel"></i> Download
        <% end %>
    </span>
</div>

<div id="deal_grid_div">
    <table id="deal_grid_view" class="table table-bordered dataTable" >
        <tr>
            <th>Investor</th>
            <th>Primary</th>
            <th>Secondary</th>
            <% DealActivity.templates(@deal).each do |deal| %>
                <th> <small class="text-muted"><%= deal.title %></small> </th>
            <% end %>
        </tr>
        <% @deal_investors.each do |deal_investor| %>
            <%= render "deals/grid_view_row", deal_investor: deal_investor %>
        <% end %>
    </table>
</div>

<%= render "/deals/show", deal: @deal %>
