<%= render "/layouts/alerts" %>
<table class="table table-bordered dataTable">
   <tr>
      <td>
         Name
      </td>
      <td>
         <%= link_to @document.name, rails_blob_path(@document.file, disposition: 'attachment') if @document.file.attached? %>
      </td>
   </tr>
   <tr>
      <td>
         Created
      </td>
      <td>
         <%= l @document.created_at, format: :default %>
   </tr>
   <tr>
      </td>    
      <td>
         Owner
      </td>
      <td>
         <%= link_to @document.owner.name, @document.owner %>
      </td>
   </tr>
   <tr>
      <td>
         Owner Type
      </td>
      <td>
         <%= @document.owner_type %>
      </td>
   </tr>
</table>

<% if current_user.entity_id == @document.id %>
   <div style="display: inline-block;">
      <%= link_to "Edit", edit_document_path(@document), {class: "btn btn-primary"} %> |
      <%= link_to "Back", documents_path, {class: "btn btn-primary"} %> |
      <%= button_to "Delete", @document, method: :delete, class: "btn btn-danger", form_class: "deleteButton" %> |
   </div>

   <%= turbo_frame_tag "new_doc_access" do %>
      <%= link_to "Share", new_doc_access_path("doc_access[document_id]": @document.id), 
      {  method: :get, class: "btn btn-primary", "data-toggle": "tooltip", 
         "title": "Access control for this document"} %> 
   <% end %>
      

   <div id="document_access" class="associated_entity">
      <%= render "/doc_accesses/index", doc_accesses: @document.doc_accesses %>
      <div data-controller="docaccess"></div>
   </div>
<% end %>